(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{150:function(e,t,a){e.exports=a(172)},155:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),i=(a(155),a(14)),l=a(106),c=a.n(l),s=a(84),u=a(92),m=a.n(u),d=a(111),p=new Headers;p.set("Content-Type","application/json");var f=function(){var e=Object(d.a)(m.a.mark((function e(t,a,n,r){var o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=r?n:JSON.stringify(n),e.next=4,fetch(a,{method:t,headers:p,body:o});case 4:return i=e.sent,e.abrupt("return",i.json());case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),g="https://v2202003114332112298.powersrv.de/api",b=function(e,t){return function(a){f("POST",g+"/users/register",e).then((function(e){e.success?t.push("/image-board/login"):a({type:"GET_ERRORS",errors:e.errors})})).catch((function(e){return a({type:"GET_ERRORS",errors:e})}))}},E=function(e){return function(t){f("POST",g+"/users/login",e).then((function(e){if(e.success){var a=e.token;localStorage.setItem("jwt",a),p.append("Authorization",a),f("GET",g+"/users").then((function(e){return t({type:"SET_USER",user:e.user})}))}else t({type:"GET_ERRORS",errors:e.errors})})).catch((function(e){t({type:"GET_ERRORS",errors:e})}))}},h=function(){return function(e){localStorage.removeItem("jwt"),p.delete("Authorization"),e({type:"SET_USER",user:{}}),window.location.href="/image-board/"}},O=a(13),v=a(112),j=a(113),w={},x={user:{},isAuthenticated:!1},y=a(11),C=a(62),P={posts:[],loading:!1},S={user:{},loading:!1},T=Object(O.combineReducers)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.errors;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return{isAuthenticated:!0,user:t.user};default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":return{posts:[t.post].concat(Object(C.a)(e.posts)),loading:!1};case"GET_POSTS":return{posts:t.posts,loading:!1};case"LOADING_POSTS":return Object(y.a)(Object(y.a)({},e),{},{loading:!0});case"UPDATE_POST":return Object(y.a)(Object(y.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.post._id?t.post:e}))});case"DELETE_POST":return Object(y.a)(Object(y.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==t.id}))});case"ADD_COMMENT":return Object(y.a)(Object(y.a)({},e),{},{posts:e.posts.map((function(e){if(e._id===t.comment.postId){var a=e.comments||[];return Object(y.a)(Object(y.a)({},e),{},{comments:[].concat(Object(C.a)(a),[t.comment])})}return e}))});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROFILE":return{user:t.user,loading:!1};case"LOADING_PROFILE":return Object(y.a)(Object(y.a)({},e),{},{loading:!0});case"FOLLOW_PROFILE":var a=e.user.followers||[];return Object(y.a)(Object(y.a)({},e),{},{user:Object(y.a)(Object(y.a)({},e.user),{},{followers:[].concat(Object(C.a)(a),[t.id])})});case"UNFOLLOW_PROFILE":return Object(y.a)(Object(y.a)({},e),{},{user:Object(y.a)(Object(y.a)({},e.user),{},{followers:e.user.followers?e.user.followers.filter((function(e){return e!==t.id})):[]})});default:return e}}}),N=Object(O.createStore)(T,Object(v.composeWithDevTools)(Object(O.applyMiddleware)(j.a))),k=a(19),A=a(15),I=a(220),R=a(28),_=a(215),B=a(5),F=a(214),L=a(216),D=a(131),G=a(238),U=a(218),z=a(219),W=a(217),M=a(85),H=a(27),J=a(236),K=a(93),X=a(114),q=a.n(X),Q=function(e,t){return function(a){t||a(Y()),f("GET",g+"/users/".concat(e)).then((function(e){return a({type:"GET_PROFILE",user:e.user})})).catch((function(e){return console.log(e)}))}},V=function(e,t){return function(a){f("POST",g+"/users/search",{text:e}).then((function(e){e.success?t.push("/image-board/profile/".concat(e.userId)):t.push("/image-board/search")})).catch((function(e){return t.push("/image-board/search")}))}},Y=function(){return{type:"LOADING_PROFILE"}},Z=function(e){return function(t){f("POST",g+"/users/follow",{profileId:e}).then((function(e){return t({type:"FOLLOW_PROFILE",id:e.userId})})).catch((function(e){return console.log(e)}))}},$=function(e){return function(t){f("POST",g+"/users/unfollow",{profileId:e}).then((function(e){return t({type:"UNFOLLOW_PROFILE",id:e.userId})})).catch((function(e){return console.log(e)}))}},ee=Object(_.a)((function(e){var t;return{search:(t={position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(K.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(K.fade)(e.palette.common.white,.25)},marginRight:50,marginLeft:50,width:"100%"},Object(H.a)(t,e.breakpoints.up("sm"),{margin:"0px auto",width:"40%"}),Object(H.a)(t,e.breakpoints.up("md"),{margin:"0px auto",width:"30%"}),t),searchIcon:{width:35,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(H.a)({paddingTop:7,paddingRight:7,paddingBottom:7,paddingLeft:35,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200})}})),te=Object(i.b)(null,(function(e){return{searchProfile:Object(O.bindActionCreators)(V,e)}}))((function(e){var t=e.searchProfile,a=Object(A.f)(),n=ee();return r.a.createElement("div",{className:n.search},r.a.createElement("div",{className:n.searchIcon},r.a.createElement(q.a,null)),r.a.createElement(J.a,{placeholder:"Search user",classes:{root:n.inputRoot,input:n.inputInput},onKeyPress:function(e){var n={text:e.target.value};"Enter"===e.key&&t(n.text,a)}}))})),ae=Object(_.a)({root:{flexGrow:1},logo:{color:"#fff",fontSize:30,textTransform:"uppercase"},space:{justifyContent:"space-between"}}),ne=Object(B.a)((function(e){return{root:{margin:e.spacing(1),color:e.palette.getContrastText(M.a[700]),backgroundColor:M.a[700],"&:hover":{backgroundColor:M.a[800]}}}}))(F.a),re=Object(i.b)((function(e){return{isAuthenticated:e.user.isAuthenticated,user:e.user.user}}),(function(e){return{logoutUser:Object(O.bindActionCreators)(h,e)}}))((function(e){var t=e.logoutUser,a=e.isAuthenticated,o=e.user,i=ae(),l=Object(n.useState)(null),c=Object(R.a)(l,2),s=c[0],u=c[1],m=function(){return u(null)},d=Boolean(s),p=r.a.createElement("div",null,r.a.createElement(k.b,{to:"/image-board/register"},r.a.createElement(ne,{variant:"contained"},"Sign Up")),r.a.createElement(k.b,{to:"/image-board/login"},r.a.createElement(ne,{variant:"contained"},"Log In"))),f=r.a.createElement("div",null,r.a.createElement(L.a,{"aria-owns":d?"menu-appbar":void 0,"aria-haspopup":"true",color:"inherit",onClick:function(e){u(e.currentTarget)}},r.a.createElement(W.a,null)),r.a.createElement(D.a,{id:"menu-appbar",open:d,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},anchorEl:s,onClose:m},r.a.createElement(k.b,{to:"/image-board/profile/".concat(o._id)},r.a.createElement(G.a,{onClick:m},"Profile")),r.a.createElement(k.b,{to:"/image-board/followed"},r.a.createElement(G.a,{onClick:m},"Followed")),r.a.createElement(k.b,{to:"/image-board/",onClick:function(){u(null),t()}},r.a.createElement(G.a,null,"Log Out"))));return r.a.createElement("div",{className:i.root},r.a.createElement(U.a,{color:"primary",position:"static"},r.a.createElement(z.a,{className:i.space},r.a.createElement(k.b,{to:"/image-board",className:i.logo},r.a.createElement("img",{alt:"logo",src:"camera_logo.png",style:{width:40}})),a&&r.a.createElement(te,null),a?f:p)))})),oe=a(233),ie=a(223),le=a(221),ce=a(235),se=a(211),ue=a(212),me=a(232),de=a(224),pe=a(213),fe=a(124),ge=a.n(fe),be=a(81),Ee=a.n(be),he=a(82),Oe=a.n(he),ve=a(125),je=a.n(ve),we=a(130),xe=function(e){return function(t){p.delete("Content-Type");var a=e.camera,n=e.location,r=e.description,o=e.files;if(a&&n&&r&&o){var i=new FormData;i.append("camera",a),i.append("location",n),i.append("description",r),i.append("file",o[0]),f("POST",g+"/posts/add",i,!0).then((function(e){p.set("Content-Type","application/json"),t({type:"ADD_POST",post:e.post})})).catch((function(e){p.set("Content-Type","application/json"),console.log(e)}))}}},ye=function(e){return function(t){t(Se());var a=g.concat("/posts",e?"/".concat(e):"");f("GET",a).then((function(e){return t({type:"GET_POSTS",posts:e.posts})})).catch((function(e){return console.log(e)}))}},Ce=function(){return function(e){f("GET",g+"/posts/following").then((function(t){return e({type:"GET_POSTS",posts:t.posts})})).catch((function(e){return console.log(e)}))}},Pe=function(e){return function(t){f("DELETE",g+"/posts/delete",{postId:e}).then((function(e){return t({type:"DELETE_POST",id:e.post._id})})).catch((function(e){return console.log(e)}))}},Se=function(){return{type:"LOADING_POSTS"}},Te=function(e){return function(t){f("PUT",g+"/posts/rating",e).then((function(e){return t({type:"UPDATE_POST",post:e.post})})).catch((function(e){return console.log(e)}))}},Ne=function(e){return function(t){f("POST",g+"/posts/comment",e).then((function(e){return t({type:"ADD_COMMENT",comment:e.comment})})).catch((function(e){return console.log(e)}))}},ke=Object(_.a)({container:{textAlign:"center"},addBtn:{position:"fixed",left:"50%",bottom:15,transform:"translateX(-50%)",padding:30,display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},dialogContent:{display:"flex",justifyContent:"space-between",marginBottom:10},detailsInput:{width:"47%"},descriptionInput:{marginBottom:20}}),Ae=Object(i.b)(null,(function(e){return{addPost:Object(O.bindActionCreators)(xe,e)}}))((function(e){var t=e.addPost,a=ke(),o={camera:"",location:"",description:"",files:[]},i=Object(n.useState)(!1),l=Object(R.a)(i,2),c=l[0],s=l[1],u=Object(n.useState)(o),m=Object(R.a)(u,2),d=m[0],p=m[1],f=function(){p(o),s(!1)},g=function(e){p(Object(y.a)(Object(y.a)({},d),{},Object(H.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:a.container},r.a.createElement(ie.a,{title:"Post your own picture","aria-label":"add"},r.a.createElement(le.a,{color:"primary",onClick:function(){return s(!0)},className:a.addBtn},r.a.createElement(ge.a,null))),r.a.createElement(ce.a,{open:c,onClose:f,style:{zIndex:10001},"aria-labelledby":"form-dialog-title"},r.a.createElement(se.a,{id:"form-dialog-title"},"Post a picture"),r.a.createElement(ue.a,null,r.a.createElement("div",{className:a.dialogContent},r.a.createElement(me.a,{label:"Camera",name:"camera",autoFocus:!0,className:a.detailsInput,id:"input-camera",onChange:g,value:d.camera,InputProps:{startAdornment:r.a.createElement(de.a,{position:"start"},r.a.createElement(Ee.a,null))}}),r.a.createElement(me.a,{label:"Location",name:"location",className:a.detailsInput,id:"input-lense",onChange:g,value:d.location,InputProps:{startAdornment:r.a.createElement(de.a,{position:"start"},r.a.createElement(Oe.a,null))}})),r.a.createElement(me.a,{label:"Description",fullWidth:!0,multiline:!0,rowsMax:"4",name:"description",className:a.descriptionInput,id:"input-description",onChange:g,value:d.description,InputProps:{startAdornment:r.a.createElement(de.a,{position:"start"},r.a.createElement(je.a,null))}}),r.a.createElement(we.a,{onChange:function(e){p(Object(y.a)(Object(y.a)({},d),{},{files:e}))},filesLimit:1,acceptedFiles:["image/jpeg","image/png","image/bmp"],maxFileSize:5e6})),r.a.createElement(pe.a,null,r.a.createElement(F.a,{onClick:f,color:"primary"},"Cancel"),r.a.createElement(F.a,{onClick:function(){t(d),p(o),f()},color:"primary"},"Submit"))))})),Ie=Object(_.a)({root:{margin:20},appBar:{maxHeight:40,justifyContent:"center",top:"auto",bottom:0,backgroundColor:"#eee",color:"#444"},link:{textDecoration:"underline",color:"#444"}}),Re=Object(i.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}))((function(e){var t=e.isAuthenticated,a=Ie();return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(Ae,null),r.a.createElement(oe.a,{className:a.root,boxShadow:3},r.a.createElement(U.a,{position:"fixed",className:a.appBar},r.a.createElement(z.a,null,r.a.createElement("span",null,"Made with"," ",r.a.createElement("span",{role:"img","aria-label":"coffee"},"\u2615")," ","by"," ",r.a.createElement("a",{className:a.link,href:"https://patrickbecker.me"},"Patrick Becker"))))))})),_e=function(e){var t=e.children;return r.a.createElement("div",null,r.a.createElement(re,null),r.a.createElement(I.a,{container:!0,direction:"column",alignContent:"center",style:{padding:25}},t),r.a.createElement(Re,null))},Be=a(132),Fe=Object(_.a)({paper:{maxWidth:500,padding:20},title:{textAlign:"center",margin:0,color:"#3F51B5"},textField:{width:"100%",marginBottom:5},btnBlock:{textAlign:"center",marginBottom:30,marginTop:20},registerLink:{marginBottom:0,fontSize:14}}),Le=Object(i.b)((function(e){return{isAuthenticated:e.user.isAuthenticated,errors:e.errors}}),(function(e){return{loginUser:Object(O.bindActionCreators)(E,e)}}))((function(e){var t=e.loginUser,a=e.isAuthenticated,o=e.errors,i=Fe(),l=Object(A.f)(),c=Object(n.useState)({email:"",password:""}),s=Object(R.a)(c,2),u=s[0],m=s[1];Object(n.useEffect)((function(){a&&l.push("/image-board/")}),[a,l]);var d=function(e){m(Object(y.a)(Object(y.a)({},u),{},Object(H.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement(Be.a,{className:i.paper},r.a.createElement("h2",{className:i.title},"Login"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(u)}},r.a.createElement(me.a,{type:"email",label:"Email",className:i.textField,value:u.email,onChange:d,name:"email",helperText:o.email?o.email:"",error:!!o.email}),r.a.createElement(me.a,{label:"Password",type:"password",name:"password",value:u.password,onChange:d,className:i.textField,helperText:o.password?o.password:"",error:!!o.password}),r.a.createElement("div",{className:i.btnBlock},r.a.createElement(F.a,{variant:"outlined",type:"submit"},"Submit"))),r.a.createElement("p",{className:i.registerLink},"Not registered? ",r.a.createElement(k.b,{to:"/image-board/register"},"Sign up now"),".")))})),De=a(83),Ge=a.n(De),Ue=a(2),ze=a(239),We=a(225),Me=a(226),He=a(240),Je=a(227),Ke=a(228),Xe=a(58),qe=a(229),Qe=a(175),Ve=a(174),Ye=a(222),Ze=a(237),$e=a(230),et=a(241),tt=a(128),at=a.n(tt),nt=a(127),rt=a.n(nt),ot=a(80),it=a.n(ot),lt=a(126),ct=a.n(lt),st=a(129),ut=a.n(st),mt=Object(_.a)({paper:{minHeight:60,padding:10,display:"flex",justifyContent:"space-between",marginTop:10,overflowWrap:"break-word",wordWrap:"break-word",wordBreak:"break-word",hyphens:"auto"},userDetails:{wordWrap:"break-word",display:"flex",justifyContent:"space-between"},colorBand:{minWidth:10,margin:"4px 10px 4px 4px"},user:{marginTop:0,marginBottom:10},time:{marginLeft:10,color:"#bbb",fontSize:12}}),dt=Object(i.b)(null)((function(e){var t=e.comment,a=mt(),n=t.message,o=t.createdAt;return r.a.createElement(Be.a,{className:a.paper},r.a.createElement("div",{className:a.userDetails},r.a.createElement("div",{className:a.colorBand,style:{backgroundColor:"#".concat(t.user&&t.user._id&&t.user._id.slice(t.user._id.length-3))}}),r.a.createElement("div",null,r.a.createElement("h3",{className:a.user},r.a.createElement(k.b,{to:"/image-board/profile/".concat(t.user&&t.user._id)},t.user&&t.user.username),r.a.createElement("span",{className:a.time},Ge()(o).fromNow())),n)))})),pt=Object(_.a)((function(e){return Object(ze.a)({root:{backgroundColor:"#fafafa",marginBottom:30},item:{flexGrow:1,maxWidth:800},cardHeader:{padding:10,paddingLeft:15},action:{alignSelf:"center",margin:0},userProfile:{margin:0},link:{color:"#666"},media:{height:0,paddingTop:"56.25%",marginBottom:10},detailsBox:{display:"flex",justifyContent:"space-between",alignContent:"bottom"},details:{display:"flex",paddingTop:10},cardDropdown:{fontSize:16,paddingLeft:16},cardContent:{paddingLeft:15,paddingRight:15},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},commentContainer:{display:"flex",backgroundColor:"#fff",padding:"10px 2px 5px 10px",borderRadius:5,marginTop:20,boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12)"},comments:{paddingTop:0},commentInput:{width:"100%",marginBottom:5}})})),ft=Object(i.b)((function(e){return{isAuthenticated:e.user.isAuthenticated,user:e.user.user}}),(function(e){return{updatePostRating:Object(O.bindActionCreators)(Te,e),deletePost:Object(O.bindActionCreators)(Pe,e),addComment:Object(O.bindActionCreators)(Ne,e)}}))((function(e){var t,a,o,i,l=e.isAuthenticated,c=e.user,u=e.post,m=e.updatePostRating,d=e.deletePost,p=e.addComment,f=Object(s.b)(),b=pt(),E=u.camera,h=u.location,O=u.description,v=u.filePath,j=u.rating,w=u.comments,x=u.createdAt,y=u._id,C=null===u||void 0===u||null===(t=u.user)||void 0===t?void 0:t.username,P=null===u||void 0===u||null===(a=u.user)||void 0===a?void 0:a._id,S=c._id,T=Object(n.useState)(j?j.overallRating:null),N=Object(R.a)(T,2),A=N[0],_=N[1],B=Object(n.useState)(!1),D=Object(R.a)(B,2),U=D[0],z=D[1],W=Object(n.useState)(!1),M=Object(R.a)(W,2),J=M[0],K=M[1],X=Object(n.useState)(""),q=Object(R.a)(X,2),Q=q[0],V=q[1],Y=Object(n.useRef)(null),Z=function(e){Y.current&&Y.current.contains(e.target)||K(!1)},$=function(e,t){_(t),y&&null!==t&&m({_id:y,rating:t})},ee=r.a.createElement(ie.a,{title:"Delete post"},r.a.createElement(L.a,{size:"small","aria-label":"delete",onClick:function(e){f({description:"This will permanently delete your post."}).then((function(){return y&&d(y)})).catch((function(){return console.log("Deletion cancelled.")}))}},r.a.createElement(it.a,{style:{margin:4}})));return r.a.createElement(I.a,{item:!0,xs:12,sm:10,md:6,lg:4,className:b.item},r.a.createElement(We.a,{className:b.root},r.a.createElement(Me.a,{className:b.cardHeader,classes:{action:b.action},avatar:r.a.createElement(He.a,{alt:C,"aria-label":"post",style:{display:"inline-flex",backgroundColor:"#".concat(P&&P.slice(P.length-3)),padding:4,fontSize:20}},null===C||void 0===C?void 0:C.substr(0,1)),action:l&&P===S&&ee,title:r.a.createElement("h3",{className:b.userProfile},r.a.createElement(k.b,{className:b.link,to:"/image-board/profile/".concat(P)},C)),subheader:Ge()(x).fromNow()}),r.a.createElement(Je.a,{image:g.substring(0,g.length-4)+v,className:b.media}),r.a.createElement(Ke.a,null,r.a.createElement(Xe.a,{variant:"body2",color:"textSecondary",style:{marginBottom:10}},O),r.a.createElement(Xe.a,{variant:"subtitle2",color:"textSecondary",className:b.detailsBox},E&&r.a.createElement("span",{className:b.details},r.a.createElement(ie.a,{title:"Camera used to take the picture"},r.a.createElement(Ee.a,{fontSize:"small",style:{marginRight:5}})),E),h&&r.a.createElement("span",{className:b.details},r.a.createElement(ie.a,{title:"Location where the picture was taken"},r.a.createElement(Oe.a,{fontSize:"small",style:{marginRight:5}})),h))),r.a.createElement("div",{style:{height:"1px",backgroundColor:"#999"}}),r.a.createElement(qe.a,{disableSpacing:!0,className:b.cardDropdown},r.a.createElement(ie.a,{title:"".concat(null===j||void 0===j||null===(o=j.overallRating)||void 0===o?void 0:o.toFixed(1)," based on \n                    ").concat(null===j||void 0===j?void 0:j.totalRating," user ratings")},r.a.createElement(ct.a,{style:{color:"gold",marginRight:3}})),null===j||void 0===j||null===(i=j.overallRating)||void 0===i?void 0:i.toFixed(1),r.a.createElement(ie.a,{title:"Rate this post"},r.a.createElement(F.a,{ref:Y,"aria-controls":J?"menu-list-grow":void 0,"aria-haspopup":"true",style:{marginLeft:10},onClick:function(){K((function(e){return!e}))},startIcon:r.a.createElement(rt.a,null)},"Rate post")),r.a.createElement(Qe.a,{open:J,anchorEl:Y.current,role:void 0,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,a=e.placement;return r.a.createElement(Ve.a,Object.assign({},t,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),r.a.createElement(Be.a,null,r.a.createElement(Ye.a,{onClickAway:Z},r.a.createElement(Ze.a,{autoFocusItem:J,id:"menu-list-grow"},r.a.createElement(G.a,{onClick:Z},r.a.createElement(et.a,{max:10,name:"post-rating",value:A,onChange:$}))))))})),r.a.createElement(ie.a,{title:"Show and add comments"},r.a.createElement(L.a,{className:Object(Ue.a)(b.expand,Object(H.a)({},b.expandOpen,U)),onClick:function(){z(!U)},"aria-expanded":U,"aria-label":"show more"},r.a.createElement(at.a,null)))),r.a.createElement($e.a,{in:U,timeout:"auto",unmountOnExit:!0,className:b.cardContent},r.a.createElement(Ke.a,{className:b.comments},null===w||void 0===w?void 0:w.map((function(e,t){return r.a.createElement(dt,{key:t,comment:e})})),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p({postId:y,user:c,message:Q,createdAt:new Date}),V("")}},r.a.createElement("div",{className:b.commentContainer},r.a.createElement(me.a,{autoFocus:!0,multiline:!0,label:"Leave a comment",type:"text",name:"comment",rowsMax:"4",className:b.commentInput,id:"input-comment",onChange:function(e){V(e.target.value)},value:Q}),r.a.createElement(L.a,{type:"submit","aria-label":"submit"},r.a.createElement(ut.a,null))))))))})),gt=a(231),bt=Object(_.a)({load:{width:"100%",marginTop:75,display:"flex",justifyContent:"center",alignItems:"center"},loadIcon:{color:"#3F51B5"}}),Et=function(){var e=bt();return r.a.createElement("div",{className:e.load},r.a.createElement(gt.a,{className:e.loadIcon}))},ht=Object(i.b)((function(e){return{posts:e.post.posts,loading:e.post.loading}}),(function(e){return{getPosts:Object(O.bindActionCreators)(ye,e),getPostsByFollowedUsers:Object(O.bindActionCreators)(Ce,e)}}))((function(e){var t=e.posts,a=e.loading,o=e.allPosts,i=e.getPosts,l=e.getPostsByFollowedUsers;Object(n.useEffect)((function(){o?i():l()}),[o,i,l]);var c=t.map((function(e){return r.a.createElement(ft,{key:e._id,post:e})}));return r.a.createElement("div",null,a?r.a.createElement(Et,null):r.a.createElement(I.a,{container:!0,justify:"space-evenly",spacing:3},c))})),Ot=Object(i.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}))((function(e){var t=e.isAuthenticated;return r.a.createElement("div",null,t?r.a.createElement(ht,{allPosts:!0}):r.a.createElement(Le,null))})),vt=Object(i.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}))((function(e){var t=e.isAuthenticated;return r.a.createElement("div",null,t?r.a.createElement(ht,{allPosts:!1}):r.a.createElement(Le,null))})),jt=function(){return r.a.createElement("div",{style:{textAlign:"center",padding:"25px"}},r.a.createElement("h2",null,"404"),r.a.createElement("h3",null,"Page not found"),r.a.createElement(k.b,{to:"/image-board"},"Dashboard"))},wt=Object(_.a)({paper:{maxWidth:500,padding:20},title:{textAlign:"center",margin:0,color:"#3F51B5"},textField:{width:"100%",marginBottom:5},btnBlock:{textAlign:"center",marginBottom:10,marginTop:20}}),xt=Object(i.b)((function(e){return{errors:e.errors}}),(function(e){return{registerUser:Object(O.bindActionCreators)(b,e)}}))((function(e){var t=e.registerUser,a=e.errors,o=Object(A.f)(),i=wt(),l=Object(n.useState)({email:"",username:"",password:"",confirmPassword:""}),c=Object(R.a)(l,2),s=c[0],u=c[1],m=function(e){u(Object(y.a)(Object(y.a)({},s),{},Object(H.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement(Be.a,{className:i.paper},r.a.createElement("h2",{className:i.title},"Register"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(s,o)}},r.a.createElement(me.a,{type:"email",label:"Email",className:i.textField,value:s.email,onChange:m,name:"email",helperText:a.email?a.email:"",error:!!a.email}),r.a.createElement(me.a,{label:"Username",type:"text",name:"username",value:s.username,onChange:m,className:i.textField,helperText:a.username?a.username:"",error:!!a.username}),r.a.createElement(me.a,{label:"Password",type:"password",name:"password",value:s.password,onChange:m,className:i.textField,helperText:a.password?a.password:"",error:!!a.password}),r.a.createElement(me.a,{label:"Confirm Password",type:"password",name:"confirmPassword",value:s.confirmPassword,onChange:m,className:i.textField,helperText:a.confirmPassword?a.confirmPassword:"",error:!!a.confirmPassword}),r.a.createElement("div",{className:i.btnBlock},r.a.createElement(F.a,{variant:"outlined",type:"submit"},"Submit")))))})),yt=Object(_.a)({paper:{maxWidth:500,padding:10,margin:"30px auto"},username:{display:"inline-block",marginTop:0,marginLeft:15,color:"#666"},email:{color:"#666",marginBottom:10},detailsBlock:{display:"flex",color:"#666"},detail:{marginRight:10,fontWeight:"bold"},detailTitle:{marginLeft:3,fontSize:14,fontWeight:"normal"},btnBlock:{marginTop:5,marginBottom:20},btnFollow:{outline:"none",backgroundColor:"#3F51B5",color:"white","&:hover":{color:"#3F51B5",borderColor:"#3F51B5",backgroundColor:"white"}},loader:{alignSelf:"center"},item:{flexGrow:1,maxWidth:800}}),Ct=Object(i.b)((function(e){return{profile:e.profile.user,user:e.user.user,loadingProfile:e.profile.loading,posts:e.post.posts,loadingPosts:e.post.loading,isAuthenticated:e.user.isAuthenticated}}),(function(e){return{getProfile:Object(O.bindActionCreators)(Q,e),getPosts:Object(O.bindActionCreators)(ye,e),followProfile:Object(O.bindActionCreators)(Z,e),unfollowProfile:Object(O.bindActionCreators)($,e)}}))((function(e){var t=e.profile,a=e.user,o=e.posts,i=e.loadingProfile,l=e.loadingPosts,c=e.isAuthenticated,s=e.getProfile,u=e.getPosts,m=e.followProfile,d=e.unfollowProfile,p=yt(),f=Object(A.g)().userId,g=a._id;Object(n.useEffect)((function(){u(f),s(f)}),[f,u,s]);var b,E=o&&o.map((function(e){return r.a.createElement(ft,{key:e._id,post:e})}));if(t&&E){var h,O=t.email,v=t.username,j=t.followers,w=t.following;c&&(h=g&&j&&!j.includes(g)?r.a.createElement("div",{className:p.btnBlock},r.a.createElement(F.a,{size:"small",variant:"outlined",className:p.btnFollow,onClick:function(){f&&m(f)}},"Follow")):r.a.createElement("div",{className:p.btnBlock},r.a.createElement(F.a,{size:"small",variant:"outlined",className:p.btnFollow,onClick:function(){f&&d(f)}},"Unfollow"))),b=r.a.createElement("div",null,r.a.createElement(Be.a,{className:p.paper},r.a.createElement(He.a,{alt:v,style:{display:"inline-flex",backgroundColor:"#".concat(f.slice(f.length-3)),padding:6,fontSize:20}},null===v||void 0===v?void 0:v.substr(0,2)),r.a.createElement("h2",{className:p.username},v),f!==g&&h,r.a.createElement("div",{className:p.email},O),r.a.createElement("div",{style:{height:"1px",backgroundColor:"#999"}}),r.a.createElement("div",{className:p.detailsBlock},r.a.createElement("div",{className:p.detail},E.length,r.a.createElement("span",{className:p.detailTitle},"Posts")),r.a.createElement("div",{className:p.detail},j?j.length:0,r.a.createElement("span",{className:p.detailTitle},"Followers")),r.a.createElement("div",{className:p.detail},w?w.length:0,r.a.createElement("span",{className:p.detailTitle},"Following")))))}return r.a.createElement(I.a,{container:!0,direction:"column"},r.a.createElement(I.a,{item:!0},!i&&b),r.a.createElement(I.a,{container:!0,justify:"space-evenly",alignContent:"center",spacing:3},l?r.a.createElement(Et,null):E))})),Pt=function(){return r.a.createElement("div",{style:{textAlign:"center",padding:"25px"}},r.a.createElement("h2",null,"User does not exist."))},St=function(){return r.a.createElement(k.a,null,r.a.createElement(_e,null,r.a.createElement(A.c,null,r.a.createElement(A.a,{exact:!0,path:"/image-board/",component:Ot}),r.a.createElement(A.a,{exact:!0,path:"/image-board/followed",component:vt}),r.a.createElement(A.a,{path:"/image-board/login",component:Le}),r.a.createElement(A.a,{path:"/image-board/register",component:xt}),r.a.createElement(A.a,{path:"/image-board/profile/:userId",component:Ct}),r.a.createElement(A.a,{path:"/image-board/search",component:Pt}),r.a.createElement(A.a,{component:jt}))))},Tt=localStorage.getItem("jwt");if(Tt){var Nt=c()(Tt);Date.now()>Nt.exp?N.dispatch(h()):(p.append("Authorization",Tt),N.dispatch((function(e){f("GET",g+"/users").then((function(t){t.success&&e({type:"SET_USER",user:t.user})}))})))}var kt=function(){return r.a.createElement(i.a,{store:N},r.a.createElement(s.a,null,r.a.createElement(St,null)))};Object(o.render)(r.a.createElement(kt,null),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.1f9a0094.chunk.js.map