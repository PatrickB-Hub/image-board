(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{149:function(e,t,a){e.exports=a(169)},154:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),i=(a(154),a(14)),l=a(84),c=a(92),s=a.n(c),u=a(110),m=new Headers;m.set("Content-Type","application/json");var d=function(){var e=Object(u.a)(s.a.mark((function e(t,a,n,r){var o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=r?n:JSON.stringify(n),e.next=4,fetch(a,{method:t,headers:m,body:o});case 4:return i=e.sent,e.abrupt("return",i.json());case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),p="https://v2202003114332112298.powersrv.de/api",f=function(e,t){return function(a){d("POST",p+"/users/register",e).then((function(e){e.success?t.push("/image-board/login"):a({type:"GET_ERRORS",errors:e.errors})})).catch((function(e){return a({type:"GET_ERRORS",errors:e})}))}},g=function(e){return function(t){d("POST",p+"/users/login",e).then((function(e){if(e.success){var a=e.token,n=e.expiresIn;localStorage.setItem("jwt",JSON.stringify({token:a,expiresIn:n})),m.append("Authorization",a),d("GET",p+"/users").then((function(e){return t({type:"SET_USER",user:e.user})}))}else t({type:"GET_ERRORS",errors:e.errors})})).catch((function(e){t({type:"GET_ERRORS",errors:e})}))}},b=function(){return function(e){localStorage.removeItem("jwt"),m.delete("Authorization"),e({type:"SET_USER",user:{}}),window.location.href="/image-board/"}},E=a(13),h=a(111),O=a(112),v={},j={user:{},isAuthenticated:!1},w=a(11),x=a(62),y={posts:[],loading:!1},C={user:{},loading:!1},P=Object(E.combineReducers)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.errors;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return{isAuthenticated:!0,user:t.user};default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":return{posts:[t.post].concat(Object(x.a)(e.posts)),loading:!1};case"GET_POSTS":return{posts:t.posts,loading:!1};case"LOADING_POSTS":return Object(w.a)(Object(w.a)({},e),{},{loading:!0});case"UPDATE_POST":return Object(w.a)(Object(w.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.post._id?t.post:e}))});case"DELETE_POST":return Object(w.a)(Object(w.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==t.id}))});case"ADD_COMMENT":return Object(w.a)(Object(w.a)({},e),{},{posts:e.posts.map((function(e){if(e._id===t.comment.postId){var a=e.comments||[];return Object(w.a)(Object(w.a)({},e),{},{comments:[].concat(Object(x.a)(a),[t.comment])})}return e}))});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROFILE":return{user:t.user,loading:!1};case"LOADING_PROFILE":return Object(w.a)(Object(w.a)({},e),{},{loading:!0});case"FOLLOW_PROFILE":var a=e.user.followers||[];return Object(w.a)(Object(w.a)({},e),{},{user:Object(w.a)(Object(w.a)({},e.user),{},{followers:[].concat(Object(x.a)(a),[t.id])})});case"UNFOLLOW_PROFILE":return Object(w.a)(Object(w.a)({},e),{},{user:Object(w.a)(Object(w.a)({},e.user),{},{followers:e.user.followers?e.user.followers.filter((function(e){return e!==t.id})):[]})});default:return e}}}),S=Object(E.createStore)(P,Object(h.composeWithDevTools)(Object(E.applyMiddleware)(O.a))),N=a(19),T=a(15),k=a(217),A=a(28),I=a(212),R=a(5),_=a(211),B=a(213),F=a(130),L=a(235),D=a(215),G=a(216),U=a(214),z=a(85),W=a(27),M=a(233),H=a(93),J=a(113),K=a.n(J),X=function(e,t){return function(a){t||a(Q()),d("GET",p+"/users/".concat(e)).then((function(e){return a({type:"GET_PROFILE",user:e.user})})).catch((function(e){return console.log(e)}))}},q=function(e,t){return function(a){d("POST",p+"/users/search",{text:e}).then((function(e){e.success?t.push("/image-board/profile/".concat(e.userId)):t.push("/image-board/search")})).catch((function(e){return t.push("/image-board/search")}))}},Q=function(){return{type:"LOADING_PROFILE"}},V=function(e){return function(t){d("POST",p+"/users/follow",{profileId:e}).then((function(e){return t({type:"FOLLOW_PROFILE",id:e.userId})})).catch((function(e){return console.log(e)}))}},Y=function(e){return function(t){d("POST",p+"/users/unfollow",{profileId:e}).then((function(e){return t({type:"UNFOLLOW_PROFILE",id:e.userId})})).catch((function(e){return console.log(e)}))}},Z=Object(I.a)((function(e){var t;return{search:(t={position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(H.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(H.fade)(e.palette.common.white,.25)},marginRight:50,marginLeft:50,width:"100%"},Object(W.a)(t,e.breakpoints.up("sm"),{margin:"0px auto",width:"40%"}),Object(W.a)(t,e.breakpoints.up("md"),{margin:"0px auto",width:"30%"}),t),searchIcon:{width:35,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(W.a)({paddingTop:7,paddingRight:7,paddingBottom:7,paddingLeft:35,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200})}})),$=Object(i.b)(null,(function(e){return{searchProfile:Object(E.bindActionCreators)(q,e)}}))((function(e){var t=e.searchProfile,a=Object(T.g)(),n=Z();return r.a.createElement("div",{className:n.search},r.a.createElement("div",{className:n.searchIcon},r.a.createElement(K.a,null)),r.a.createElement(M.a,{placeholder:"Search user",classes:{root:n.inputRoot,input:n.inputInput},onKeyPress:function(e){var n={text:e.target.value};"Enter"===e.key&&t(n.text,a)}}))})),ee=Object(I.a)({root:{flexGrow:1},logo:{color:"#fff",fontSize:30,textTransform:"uppercase"},space:{justifyContent:"space-between"}}),te=Object(R.a)((function(e){return{root:{margin:e.spacing(1),color:e.palette.getContrastText(z.a[700]),backgroundColor:z.a[700],"&:hover":{backgroundColor:z.a[800]}}}}))(_.a),ae=Object(i.b)((function(e){return{isAuthenticated:e.user.isAuthenticated,user:e.user.user}}),(function(e){return{logoutUser:Object(E.bindActionCreators)(b,e)}}))((function(e){var t=e.logoutUser,a=e.isAuthenticated,o=e.user,i=ee(),l=Object(n.useState)(null),c=Object(A.a)(l,2),s=c[0],u=c[1],m=function(){return u(null)},d=Boolean(s),p=r.a.createElement("div",null,r.a.createElement(N.b,{to:"/image-board/register"},r.a.createElement(te,{variant:"contained"},"Sign Up")),r.a.createElement(N.b,{to:"/image-board/login"},r.a.createElement(te,{variant:"contained"},"Log In"))),f=r.a.createElement("div",null,r.a.createElement(B.a,{"aria-owns":d?"menu-appbar":void 0,"aria-haspopup":"true",color:"inherit",onClick:function(e){u(e.currentTarget)}},r.a.createElement(U.a,null)),r.a.createElement(F.a,{id:"menu-appbar",open:d,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},anchorEl:s,onClose:m},r.a.createElement(N.b,{to:"/image-board/profile/".concat(o._id)},r.a.createElement(L.a,{onClick:m},"Profile")),r.a.createElement(N.b,{to:"/image-board/followed"},r.a.createElement(L.a,{onClick:m},"Followed")),r.a.createElement(N.b,{to:"/image-board/",onClick:function(){u(null),t()}},r.a.createElement(L.a,null,"Log Out"))));return r.a.createElement("div",{className:i.root},r.a.createElement(D.a,{color:"primary",position:"static"},r.a.createElement(G.a,{className:i.space},r.a.createElement(N.b,{to:"/image-board/",className:i.logo},r.a.createElement("img",{alt:"logo",src:"camera_logo.png",style:{width:40}})),a&&r.a.createElement($,null),a?f:p)))})),ne=a(230),re=a(220),oe=a(218),ie=a(232),le=a(208),ce=a(209),se=a(229),ue=a(221),me=a(210),de=a(123),pe=a.n(de),fe=a(81),ge=a.n(fe),be=a(82),Ee=a.n(be),he=a(124),Oe=a.n(he),ve=a(129),je=function(e){return function(t){m.delete("Content-Type");var a=e.camera,n=e.location,r=e.description,o=e.files;if(a&&n&&r&&o){var i=new FormData;i.append("camera",a),i.append("location",n),i.append("description",r),i.append("file",o[0]),d("POST",p+"/posts/add",i,!0).then((function(e){m.set("Content-Type","application/json"),t({type:"ADD_POST",post:e.post})})).catch((function(e){m.set("Content-Type","application/json"),console.log(e)}))}}},we=function(e){return function(t){t(Ce());var a=p.concat("/posts",e?"/".concat(e):"");d("GET",a).then((function(e){return t({type:"GET_POSTS",posts:e.posts})})).catch((function(e){return console.log(e)}))}},xe=function(){return function(e){d("GET",p+"/posts/following").then((function(t){return e({type:"GET_POSTS",posts:t.posts})})).catch((function(e){return console.log(e)}))}},ye=function(e){return function(t){d("DELETE",p+"/posts/delete",{postId:e}).then((function(e){return t({type:"DELETE_POST",id:e.post._id})})).catch((function(e){return console.log(e)}))}},Ce=function(){return{type:"LOADING_POSTS"}},Pe=function(e){return function(t){d("PUT",p+"/posts/rating",e).then((function(e){return t({type:"UPDATE_POST",post:e.post})})).catch((function(e){return console.log(e)}))}},Se=function(e){return function(t){d("POST",p+"/posts/comment",e).then((function(e){return t({type:"ADD_COMMENT",comment:e.comment})})).catch((function(e){return console.log(e)}))}},Ne=Object(I.a)({container:{textAlign:"center"},addBtn:{position:"fixed",left:"50%",bottom:15,transform:"translateX(-50%)",padding:30,display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},dialogContent:{display:"flex",justifyContent:"space-between",marginBottom:10},detailsInput:{width:"47%"},descriptionInput:{marginBottom:20}}),Te=Object(i.b)(null,(function(e){return{addPost:Object(E.bindActionCreators)(je,e)}}))((function(e){var t=e.addPost,a=Ne(),o={camera:"",location:"",description:"",files:[]},i=Object(n.useState)(!1),l=Object(A.a)(i,2),c=l[0],s=l[1],u=Object(n.useState)(o),m=Object(A.a)(u,2),d=m[0],p=m[1],f=function(){p(o),s(!1)},g=function(e){p(Object(w.a)(Object(w.a)({},d),{},Object(W.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:a.container},r.a.createElement(re.a,{title:"Post your own picture","aria-label":"add"},r.a.createElement(oe.a,{color:"primary",onClick:function(){return s(!0)},className:a.addBtn},r.a.createElement(pe.a,null))),r.a.createElement(ie.a,{open:c,onClose:f,style:{zIndex:10001},"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Post a picture"),r.a.createElement(ce.a,null,r.a.createElement("div",{className:a.dialogContent},r.a.createElement(se.a,{label:"Camera",name:"camera",autoFocus:!0,className:a.detailsInput,id:"input-camera",onChange:g,value:d.camera,InputProps:{startAdornment:r.a.createElement(ue.a,{position:"start"},r.a.createElement(ge.a,null))}}),r.a.createElement(se.a,{label:"Location",name:"location",className:a.detailsInput,id:"input-lense",onChange:g,value:d.location,InputProps:{startAdornment:r.a.createElement(ue.a,{position:"start"},r.a.createElement(Ee.a,null))}})),r.a.createElement(se.a,{label:"Description",fullWidth:!0,multiline:!0,rowsMax:"4",name:"description",className:a.descriptionInput,id:"input-description",onChange:g,value:d.description,InputProps:{startAdornment:r.a.createElement(ue.a,{position:"start"},r.a.createElement(Oe.a,null))}}),r.a.createElement(ve.a,{onChange:function(e){p(Object(w.a)(Object(w.a)({},d),{},{files:e}))},filesLimit:1,acceptedFiles:["image/jpeg","image/png","image/bmp"],maxFileSize:5e6})),r.a.createElement(me.a,null,r.a.createElement(_.a,{onClick:f,color:"primary"},"Cancel"),r.a.createElement(_.a,{onClick:function(){t(d),p(o),f()},color:"primary"},"Submit"))))})),ke=Object(I.a)({root:{margin:20},appBar:{maxHeight:40,justifyContent:"center",top:"auto",bottom:0,backgroundColor:"#eee",color:"#444"},link:{textDecoration:"underline",color:"#444"}}),Ae=Object(i.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}))((function(e){var t=e.isAuthenticated,a=ke();return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(Te,null),r.a.createElement(ne.a,{className:a.root,boxShadow:3},r.a.createElement(D.a,{position:"fixed",className:a.appBar},r.a.createElement(G.a,null,r.a.createElement("span",null,"Made with"," ",r.a.createElement("span",{role:"img","aria-label":"coffee"},"\u2615")," ","by"," ",r.a.createElement("a",{className:a.link,href:"https://patrickbecker.me"},"Patrick Becker"))))))})),Ie=function(e){var t=e.children;return r.a.createElement("div",null,r.a.createElement(ae,null),r.a.createElement(k.a,{container:!0,direction:"column",alignContent:"center",style:{padding:25}},t),r.a.createElement(Ae,null))},Re=a(131),_e=Object(I.a)({paper:{maxWidth:500,padding:20},title:{textAlign:"center",margin:0,color:"#3F51B5"},textField:{width:"100%",marginBottom:5},btnBlock:{textAlign:"center",marginBottom:30,marginTop:20},registerLink:{marginBottom:0,fontSize:14}}),Be=Object(i.b)((function(e){return{isAuthenticated:e.user.isAuthenticated,errors:e.errors}}),(function(e){return{loginUser:Object(E.bindActionCreators)(g,e)}}))((function(e){var t=e.loginUser,a=e.isAuthenticated,o=e.errors,i=_e(),l=Object(T.g)(),c=Object(n.useState)({email:"",password:""}),s=Object(A.a)(c,2),u=s[0],m=s[1];Object(n.useEffect)((function(){a&&l.push("/image-board/")}),[a,l]);var d=function(e){m(Object(w.a)(Object(w.a)({},u),{},Object(W.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement(Re.a,{className:i.paper},r.a.createElement("h2",{className:i.title},"Login"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(u)}},r.a.createElement(se.a,{label:"Email",type:"email",autoComplete:"username",className:i.textField,value:u.email,onChange:d,name:"email",helperText:o.email?o.email:"",error:!!o.email}),r.a.createElement(se.a,{label:"Password",type:"password",autoComplete:"current-password",name:"password",value:u.password,onChange:d,className:i.textField,helperText:o.password?o.password:"",error:!!o.password}),r.a.createElement("div",{className:i.btnBlock},r.a.createElement(_.a,{variant:"outlined",type:"submit"},"Submit"))),r.a.createElement("p",{className:i.registerLink},"Not registered? ",r.a.createElement(N.b,{to:"/image-board/register"},"Sign up now"),".")))})),Fe=a(83),Le=a.n(Fe),De=a(2),Ge=a(236),Ue=a(222),ze=a(223),We=a(237),Me=a(224),He=a(225),Je=a(58),Ke=a(226),Xe=a(172),qe=a(171),Qe=a(219),Ve=a(234),Ye=a(227),Ze=a(238),$e=a(127),et=a.n($e),tt=a(126),at=a.n(tt),nt=a(80),rt=a.n(nt),ot=a(125),it=a.n(ot),lt=a(128),ct=a.n(lt),st=Object(I.a)({paper:{minHeight:60,padding:10,display:"flex",justifyContent:"space-between",marginTop:10,overflowWrap:"break-word",wordWrap:"break-word",wordBreak:"break-word",hyphens:"auto"},userDetails:{wordWrap:"break-word",display:"flex",justifyContent:"space-between"},colorBand:{minWidth:10,margin:"4px 10px 4px 4px"},user:{marginTop:0,marginBottom:10},time:{marginLeft:10,color:"#bbb",fontSize:12}}),ut=Object(i.b)(null)((function(e){var t=e.comment,a=st(),n=t.message,o=t.createdAt;return r.a.createElement(Re.a,{className:a.paper},r.a.createElement("div",{className:a.userDetails},r.a.createElement("div",{className:a.colorBand,style:{backgroundColor:"#".concat(t.user&&t.user._id&&t.user._id.slice(t.user._id.length-3))}}),r.a.createElement("div",null,r.a.createElement("h3",{className:a.user},r.a.createElement(N.b,{to:"/image-board/profile/".concat(t.user&&t.user._id)},t.user&&t.user.username),r.a.createElement("span",{className:a.time},Le()(o).fromNow())),n)))})),mt=Object(I.a)((function(e){return Object(Ge.a)({root:{backgroundColor:"#fafafa",marginBottom:30},item:{flexGrow:1,maxWidth:800},cardHeader:{padding:10,paddingLeft:15},action:{alignSelf:"center",margin:0},userProfile:{margin:0},link:{color:"#666"},media:{height:0,paddingTop:"56.25%",marginBottom:10},detailsBox:{display:"flex",justifyContent:"space-between",alignContent:"bottom"},details:{display:"flex",paddingTop:10},cardDropdown:{fontSize:16,paddingLeft:16},cardContent:{paddingLeft:15,paddingRight:15},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},commentContainer:{display:"flex",backgroundColor:"#fff",padding:"10px 2px 5px 10px",borderRadius:5,marginTop:20,boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12)"},comments:{paddingTop:0},commentInput:{width:"100%",marginBottom:5}})})),dt=Object(i.b)((function(e){return{isAuthenticated:e.user.isAuthenticated,user:e.user.user}}),(function(e){return{updatePostRating:Object(E.bindActionCreators)(Pe,e),deletePost:Object(E.bindActionCreators)(ye,e),addComment:Object(E.bindActionCreators)(Se,e)}}))((function(e){var t,a,o,i,c=e.isAuthenticated,s=e.user,u=e.post,m=e.updatePostRating,d=e.deletePost,f=e.addComment,g=Object(l.b)(),b=mt(),E=u.camera,h=u.location,O=u.description,v=u.filePath,j=u.rating,w=u.comments,x=u.createdAt,y=u._id,C=null===u||void 0===u||null===(t=u.user)||void 0===t?void 0:t.username,P=null===u||void 0===u||null===(a=u.user)||void 0===a?void 0:a._id,S=s._id,T=Object(n.useState)(j?j.overallRating:null),I=Object(A.a)(T,2),R=I[0],F=I[1],D=Object(n.useState)(!1),G=Object(A.a)(D,2),U=G[0],z=G[1],M=Object(n.useState)(!1),H=Object(A.a)(M,2),J=H[0],K=H[1],X=Object(n.useState)(""),q=Object(A.a)(X,2),Q=q[0],V=q[1],Y=Object(n.useRef)(null),Z=function(e){Y.current&&Y.current.contains(e.target)||K(!1)},$=function(e,t){F(t),y&&null!==t&&m({_id:y,rating:t})},ee=r.a.createElement(re.a,{title:"Delete post"},r.a.createElement(B.a,{size:"small","aria-label":"delete",onClick:function(e){g({description:"This will permanently delete your post."}).then((function(){return y&&d(y)})).catch((function(){return console.log("Deletion cancelled.")}))}},r.a.createElement(rt.a,{style:{margin:4}})));return r.a.createElement(k.a,{item:!0,xs:12,sm:10,md:6,lg:4,className:b.item},r.a.createElement(Ue.a,{className:b.root},r.a.createElement(ze.a,{className:b.cardHeader,classes:{action:b.action},avatar:r.a.createElement(We.a,{alt:C,"aria-label":"post",style:{display:"inline-flex",backgroundColor:"#".concat(P&&P.slice(P.length-3)),padding:4,fontSize:20}},null===C||void 0===C?void 0:C.substr(0,1)),action:c&&P===S&&ee,title:r.a.createElement("h3",{className:b.userProfile},r.a.createElement(N.b,{className:b.link,to:"/image-board/profile/".concat(P)},C)),subheader:Le()(x).fromNow()}),r.a.createElement(Me.a,{image:p.substring(0,p.length-4)+v,className:b.media}),r.a.createElement(He.a,null,r.a.createElement(Je.a,{variant:"body2",color:"textSecondary",style:{marginBottom:10}},O),r.a.createElement(Je.a,{variant:"subtitle2",color:"textSecondary",className:b.detailsBox},E&&r.a.createElement("span",{className:b.details},r.a.createElement(re.a,{title:"Camera used to take the picture"},r.a.createElement(ge.a,{fontSize:"small",style:{marginRight:5}})),E),h&&r.a.createElement("span",{className:b.details},r.a.createElement(re.a,{title:"Location where the picture was taken"},r.a.createElement(Ee.a,{fontSize:"small",style:{marginRight:5}})),h))),r.a.createElement("div",{style:{height:"1px",backgroundColor:"#999"}}),r.a.createElement(Ke.a,{disableSpacing:!0,className:b.cardDropdown},r.a.createElement(re.a,{title:"".concat(null===j||void 0===j||null===(o=j.overallRating)||void 0===o?void 0:o.toFixed(1)," based on \n                    ").concat(null===j||void 0===j?void 0:j.totalRating," user ratings")},r.a.createElement(it.a,{style:{color:"gold",marginRight:3}})),null===j||void 0===j||null===(i=j.overallRating)||void 0===i?void 0:i.toFixed(1),r.a.createElement(re.a,{title:"Rate this post"},r.a.createElement(_.a,{ref:Y,"aria-controls":J?"menu-list-grow":void 0,"aria-haspopup":"true",style:{marginLeft:10},onClick:function(){K((function(e){return!e}))},startIcon:r.a.createElement(at.a,null)},"Rate post")),r.a.createElement(Xe.a,{open:J,anchorEl:Y.current,role:void 0,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,a=e.placement;return r.a.createElement(qe.a,Object.assign({},t,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),r.a.createElement(Re.a,null,r.a.createElement(Qe.a,{onClickAway:Z},r.a.createElement(Ve.a,{autoFocusItem:J,id:"menu-list-grow"},r.a.createElement(L.a,{onClick:Z},r.a.createElement(Ze.a,{max:10,name:"post-rating",value:R,onChange:$}))))))})),r.a.createElement(re.a,{title:"Show and add comments"},r.a.createElement(B.a,{className:Object(De.a)(b.expand,Object(W.a)({},b.expandOpen,U)),onClick:function(){z(!U)},"aria-expanded":U,"aria-label":"show more"},r.a.createElement(et.a,null)))),r.a.createElement(Ye.a,{in:U,timeout:"auto",unmountOnExit:!0,className:b.cardContent},r.a.createElement(He.a,{className:b.comments},null===w||void 0===w?void 0:w.map((function(e,t){return r.a.createElement(ut,{key:t,comment:e})})),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),f({postId:y,user:s,message:Q,createdAt:new Date}),V("")}},r.a.createElement("div",{className:b.commentContainer},r.a.createElement(se.a,{autoFocus:!0,multiline:!0,label:"Leave a comment",type:"text",name:"comment",rowsMax:"4",className:b.commentInput,id:"input-comment",onChange:function(e){V(e.target.value)},value:Q}),r.a.createElement(B.a,{type:"submit","aria-label":"submit"},r.a.createElement(ct.a,null))))))))})),pt=a(228),ft=Object(I.a)({load:{width:"100%",marginTop:75,display:"flex",justifyContent:"center",alignItems:"center"},loadIcon:{color:"#3F51B5"}}),gt=function(){var e=ft();return r.a.createElement("div",{className:e.load},r.a.createElement(pt.a,{className:e.loadIcon}))},bt=Object(i.b)((function(e){return{posts:e.post.posts,loading:e.post.loading}}),(function(e){return{getPosts:Object(E.bindActionCreators)(we,e),getPostsByFollowedUsers:Object(E.bindActionCreators)(xe,e)}}))((function(e){var t=e.posts,a=e.loading,o=e.allPosts,i=e.getPosts,l=e.getPostsByFollowedUsers;Object(n.useEffect)((function(){o?i():l()}),[o,i,l]);var c=t.map((function(e){return r.a.createElement(dt,{key:e._id,post:e})}));return r.a.createElement("div",null,a?r.a.createElement(gt,null):r.a.createElement(k.a,{container:!0,justify:"space-evenly",spacing:3},c))})),Et=Object(i.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}))((function(e){var t=e.isAuthenticated;return r.a.createElement("div",null,t?r.a.createElement(bt,{allPosts:!0}):r.a.createElement(Be,null))})),ht=Object(i.b)((function(e){return{isAuthenticated:e.user.isAuthenticated}}))((function(e){var t=e.isAuthenticated;return r.a.createElement("div",null,t?r.a.createElement(bt,{allPosts:!1}):r.a.createElement(Be,null))})),Ot=function(){return r.a.createElement("div",{style:{textAlign:"center",padding:"25px"}},r.a.createElement("h2",null,"404"),r.a.createElement("h3",null,"Page not found"),r.a.createElement(N.b,{to:"/image-board/"},"Dashboard"))},vt=Object(I.a)({paper:{maxWidth:500,padding:20},title:{textAlign:"center",margin:0,color:"#3F51B5"},textField:{width:"100%",marginBottom:5},btnBlock:{textAlign:"center",marginBottom:10,marginTop:20}}),jt=Object(i.b)((function(e){return{errors:e.errors}}),(function(e){return{registerUser:Object(E.bindActionCreators)(f,e)}}))((function(e){var t=e.registerUser,a=e.errors,o=Object(T.g)(),i=vt(),l=Object(n.useState)({email:"",username:"",password:"",confirmPassword:""}),c=Object(A.a)(l,2),s=c[0],u=c[1],m=function(e){u(Object(w.a)(Object(w.a)({},s),{},Object(W.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement(Re.a,{className:i.paper},r.a.createElement("h2",{className:i.title},"Register"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(s,o)}},r.a.createElement(se.a,{type:"email",label:"Email",className:i.textField,value:s.email,onChange:m,name:"email",helperText:a.email?a.email:"",error:!!a.email}),r.a.createElement(se.a,{label:"Username",type:"text",name:"username",value:s.username,onChange:m,className:i.textField,helperText:a.username?a.username:"",error:!!a.username}),r.a.createElement(se.a,{label:"Password",type:"password",name:"password",value:s.password,onChange:m,className:i.textField,helperText:a.password?a.password:"",error:!!a.password}),r.a.createElement(se.a,{label:"Confirm Password",type:"password",name:"confirmPassword",value:s.confirmPassword,onChange:m,className:i.textField,helperText:a.confirmPassword?a.confirmPassword:"",error:!!a.confirmPassword}),r.a.createElement("div",{className:i.btnBlock},r.a.createElement(_.a,{variant:"outlined",type:"submit"},"Submit")))))})),wt=Object(I.a)({paper:{maxWidth:500,padding:10,margin:"30px auto"},username:{display:"inline-block",marginTop:0,marginLeft:15,color:"#666"},email:{color:"#666",marginBottom:10},detailsBlock:{display:"flex",color:"#666"},detail:{marginRight:10,fontWeight:"bold"},detailTitle:{marginLeft:3,fontSize:14,fontWeight:"normal"},btnBlock:{marginTop:5,marginBottom:20},btnFollow:{outline:"none",backgroundColor:"#3F51B5",color:"white","&:hover":{color:"#3F51B5",borderColor:"#3F51B5",backgroundColor:"white"}},loader:{alignSelf:"center"},item:{flexGrow:1,maxWidth:800}}),xt=Object(i.b)((function(e){return{profile:e.profile.user,user:e.user.user,loadingProfile:e.profile.loading,posts:e.post.posts,loadingPosts:e.post.loading,isAuthenticated:e.user.isAuthenticated}}),(function(e){return{getProfile:Object(E.bindActionCreators)(X,e),getPosts:Object(E.bindActionCreators)(we,e),followProfile:Object(E.bindActionCreators)(V,e),unfollowProfile:Object(E.bindActionCreators)(Y,e)}}))((function(e){var t=e.profile,a=e.user,o=e.posts,i=e.loadingProfile,l=e.loadingPosts,c=e.isAuthenticated,s=e.getProfile,u=e.getPosts,m=e.followProfile,d=e.unfollowProfile,p=wt(),f=Object(T.h)().userId,g=a._id;Object(n.useEffect)((function(){u(f),s(f)}),[f,u,s]);var b,E=o&&o.map((function(e){return r.a.createElement(dt,{key:e._id,post:e})}));if(t&&E){var h,O=t.email,v=t.username,j=t.followers,w=t.following;c&&(h=g&&j&&!j.includes(g)?r.a.createElement("div",{className:p.btnBlock},r.a.createElement(_.a,{size:"small",variant:"outlined",className:p.btnFollow,onClick:function(){f&&m(f)}},"Follow")):r.a.createElement("div",{className:p.btnBlock},r.a.createElement(_.a,{size:"small",variant:"outlined",className:p.btnFollow,onClick:function(){f&&d(f)}},"Unfollow"))),b=r.a.createElement("div",null,r.a.createElement(Re.a,{className:p.paper},r.a.createElement(We.a,{alt:v,style:{display:"inline-flex",backgroundColor:"#".concat(f.slice(f.length-3)),padding:6,fontSize:20}},null===v||void 0===v?void 0:v.substr(0,2)),r.a.createElement("h2",{className:p.username},v),f!==g&&h,r.a.createElement("div",{className:p.email},O),r.a.createElement("div",{style:{height:"1px",backgroundColor:"#999"}}),r.a.createElement("div",{className:p.detailsBlock},r.a.createElement("div",{className:p.detail},E.length,r.a.createElement("span",{className:p.detailTitle},"Posts")),r.a.createElement("div",{className:p.detail},j?j.length:0,r.a.createElement("span",{className:p.detailTitle},"Followers")),r.a.createElement("div",{className:p.detail},w?w.length:0,r.a.createElement("span",{className:p.detailTitle},"Following")))))}return r.a.createElement(k.a,{container:!0,direction:"column"},r.a.createElement(k.a,{item:!0},!i&&b),r.a.createElement(k.a,{container:!0,justify:"space-evenly",alignContent:"center",spacing:3},l?r.a.createElement(gt,null):E))})),yt=function(){return r.a.createElement("div",{style:{textAlign:"center",padding:"25px"}},r.a.createElement("h2",null,"User does not exist."))},Ct=function(){return r.a.createElement(N.a,null,r.a.createElement(Ie,null,r.a.createElement(T.d,null,r.a.createElement(T.b,{exact:!0,path:"/image-board/",component:Et}),r.a.createElement(T.b,{exact:!0,path:"/image-board/followed",component:ht}),r.a.createElement(T.b,{path:"/image-board/login",component:Be}),r.a.createElement(T.b,{path:"/image-board/register",component:jt}),r.a.createElement(T.b,{path:"/image-board/profile/:userId",component:xt}),r.a.createElement(T.b,{path:"/image-board/search",component:yt}),r.a.createElement(T.a,{exact:!0,from:"/",to:"/image-board/"}),r.a.createElement(T.b,{component:Ot}))))},Pt=localStorage.getItem("jwt");if(Pt){var St=Date.now(),Nt=JSON.parse(Pt);St>Nt.expiresIn?S.dispatch(b()):(m.append("Authorization",Nt.token),S.dispatch((function(e){d("GET",p+"/users").then((function(t){t.success&&e({type:"SET_USER",user:t.user})}))})))}var Tt=function(){return r.a.createElement(i.a,{store:S},r.a.createElement(l.a,null,r.a.createElement(Ct,null)))};Object(o.render)(r.a.createElement(Tt,null),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.af0bba61.chunk.js.map